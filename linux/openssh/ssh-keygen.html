

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ssh-keygen &mdash; A place to learn about devops, linux, python, life, and much more.</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="apple-touch-icon" sizes="180x180" href="_static/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="_static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="_static/favicon-16x16.png">
  <link rel="manifest" href="_static/site.webmanifest">
  <link rel="mask-icon" href="_static/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="_static/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="_static/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="PAM - 可插拔认证模块" href="../pam.html" />
    <link rel="prev" title="sshd" href="sshd.html" />

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-132355237-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-132355237-1');
  </script>



 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> lfzyx
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../devops/index.html">DevOps</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Linux</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../kvm.html">KVM - 虚拟化解决方案</a></li>
<li class="toctree-l2"><a class="reference internal" href="../systemd.html">Systemd - 系统启动管理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../audit.html">Audit - 安全审计</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tripwire.html">Tripwire - 文件完整性检查</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sysstat/index.html">Sysstat - 系统性能分析套件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nginx.html">Nginx - 高性能 web 服务器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crontab.html">Crontab - 周期性任务</a></li>
<li class="toctree-l2"><a class="reference internal" href="../keepalived.html">Keepalived - 高可用解决方案</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lsof.html">Lsof - 列出打开的文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pxe.html">PXE - 预启动执行环境</a></li>
<li class="toctree-l2"><a class="reference internal" href="../openldap.html">OpenLDAP - LDAP 协议的开源实现</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfs.html">NFS - 分布式文件系统</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Openssh - 安全传输协议</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#id3">安装</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#id4">组件</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="scp.html">scp</a></li>
<li class="toctree-l4"><a class="reference internal" href="sshd.html">sshd</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">ssh-keygen</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pam.html">PAM - 可插拔认证模块</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rsync.html">Rsync - 文件同步</a></li>
<li class="toctree-l2"><a class="reference internal" href="../svn.html">SVN - 上一代版本控制系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tomcat.html">Tomcat - java 容器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ulimit.html">Ulimit - 用户资源控制</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iftop.html">Iftop - 监控实时流量</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mongodb.html">MongoDB - 文档数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filters/index.html">Filter - 流过滤器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Unix-commands/index.html">Unix 实用程序列表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware/index.html">Hardware - 查询硬件信息</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../c/index.html">C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../life/index.html">Life</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">lfzyx</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Linux</a> &raquo;</li>
        
          <li><a href="index.html">Openssh - 安全传输协议</a> &raquo;</li>
        
      <li>ssh-keygen</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/lfzyx/lfzyx.org/blob/master/linux/openssh/ssh-keygen.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ssh-keygen">
<h1>ssh-keygen<a class="headerlink" href="#ssh-keygen" title="永久链接至标题">¶</a></h1>
<p>ssh-keygen 用于生成、管理和转换认证密钥，包括 RSA 和 DSA 两种密钥。
密钥类型可以用 -t 选项指定。如果没有指定则默认生成用于SSH-2的RSA密钥。
ssh-keygen 还可以用来产生 Diffie-Hellman group exchange (DH-GEX) 中使用的素数模数。
参见模数和生成小节。
一般说来，如果用户希望使用RSA或DSA认证，那么至少应该运行一次这个程序，
在 ~/.ssh/identity, ~/.ssh/id_dsa 或 ~/.ssh/id_rsa 文件中创建认证所需的密钥。
另外，系统管理员还可以用它产生主机密钥。
通常，这个程序产生一个密钥对，并要求指定一个文件存放私钥，同时将公钥存放在附加了”.pub”后缀的同名文件中。
程序同时要求输入一个密语字符串(passphrase)，空表示没有密语(主机密钥的密语必须为空)。
密语和口令(password)非常相似，但是密语可以是一句话，里面有单词、标点符号、数字、空格或任何你想要的字符。
好的密语要30个以上的字符，难以猜出，由大小写字母、数字、非字母混合组成。密语可以用 -p 选项修改。
丢失的密语不可恢复。如果丢失或忘记了密语，用户必须产生新的密钥，然后把相应的公钥分发到其他机器上去。
RSA1的密钥文件中有一个”注释”字段，可以方便用户标识这个密钥，指出密钥的用途或其他有用的信息。
创建密钥的时候，注释域初始化为”<a class="reference external" href="mailto:user&#37;&#52;&#48;host">user<span>&#64;</span>host</a>”，以后可以用 -c 选项修改。</p>
<div class="section" id="id1">
<h2>参数<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<p>-a trials 在使用 -T 对 DH-GEX 候选素数进行安全筛选时需要执行的基本测试数量。</p>
<p>-B 显示指定的公钥/私钥文件的 bubblebabble 摘要。</p>
<p>-b bits 指定密钥长度。对于RSA密钥，最小要求768位，默认是2048位。DSA密钥必须恰好是1024位(FIPS 186-2 标准的要求)。</p>
<p>-C comment 提供一个新注释</p>
<p>-c 要求修改私钥和公钥文件中的注释。本选项只支持 RSA1 密钥。 程序将提示输入私钥文件名、密语(如果存在)、新注释。</p>
<p>-D reader 下载存储在智能卡 reader 里的 RSA 公钥。</p>
<dl class="docutils">
<dt>-e 读取OpenSSH的私钥或公钥文件，并以 RFC 4716 SSH 公钥文件格式在 stdout 上显示出来。</dt>
<dd>该选项能够为多种商业版本的 SSH 输出密钥。</dd>
<dt>-F hostname 在 known_hosts 文件中搜索指定的 hostname ，并列出所有的匹配项。</dt>
<dd>这个选项主要用于查找散列过的主机名/ip地址，还可以和 -H 选项联用打印找到的公钥的散列值。</dd>
</dl>
<p>-f filename 指定密钥文件名。</p>
<p>-G output_file 为 DH-GEX 产生候选素数。这些素数必须在使用之前使用 -T 选项进行安全筛选。</p>
<p>-g 在使用 -r 打印指纹资源记录的时候使用通用的 DNS 格式。</p>
<dl class="docutils">
<dt>-H 对 known_hosts 文件进行散列计算。这将把文件中的所有主机名/ip地址替换为相应的散列值。</dt>
<dd>原来文件的内容将会添加一个”.old”后缀后保存。这些散列值只能被 ssh 和 sshd 使用。
这个选项不会修改已经经过散列的主机名/ip地址，因此可以在部分公钥已经散列过的文件上安全使用。</dd>
</dl>
<p>-i 读取未加密的SSH-2兼容的私钥/公钥文件，然后在 stdout 显示OpenSSH兼容的私钥/公钥。 该选项主要用于从多种商业版本的SSH中导入密钥。</p>
<p>-l 显示公钥文件的指纹数据。它也支持 RSA1 的私钥。</p>
<blockquote>
<div>对于RSA和DSA密钥，将会寻找对应的公钥文件，然后显示其指纹数据。</div></blockquote>
<p>-M memory 指定在生成 DH-GEXS 候选素数的时候最大内存用量(MB)。</p>
<p>-N new_passphrase 提供一个新的密语。</p>
<p>-P passphrase 提供(旧)密语。</p>
<p>-p 要求改变某私钥文件的密语而不重建私钥。程序将提示输入私钥文件名、原来的密语、以及两次输入新密语。</p>
<p>-q 安静模式。用于在 /etc/rc 中创建新密钥的时候。</p>
<dl class="docutils">
<dt>-R hostname 从 known_hosts 文件中删除所有属于 hostname 的密钥。</dt>
<dd>这个选项主要用于删除经过散列的主机(参见 -H 选项)的密钥。</dd>
</dl>
<p>-r hostname 打印名为 hostname 的公钥文件的 SSHFP 指纹资源记录。</p>
<p>-S start 指定在生成 DH-GEX 候选模数时的起始点(16进制)。</p>
<p>-T output_file 测试 Diffie-Hellman group exchange 候选素数(由 -G 选项生成)的安全性。</p>
<p>-t type 指定要创建的密钥类型。可以使用：”rsa1”(SSH-1) “rsa”(SSH-2) “dsa”(SSH-2)</p>
<p>-U reader 把现存的RSA私钥上传到智能卡 reader</p>
<p>-v 详细模式。ssh-keygen 将会输出处理过程的详细调试信息。常用于调试模数的产生过程。</p>
<blockquote>
<div>重复使用多个 -v 选项将会增加信息的详细程度(最大3次)。</div></blockquote>
<p>-W generator 指定在为 DH-GEX 测试候选模数时想要使用的 generator</p>
<p>-y 读取OpenSSH专有格式的公钥文件，并将OpenSSH公钥显示在 stdout 上。</p>
</div>
<div class="section" id="id2">
<h2>示例<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">makessh</span><span class="o">-</span><span class="n">keygen</span>

<span class="n">Generating</span> <span class="n">public</span><span class="o">/</span><span class="n">private</span> <span class="n">rsa</span> <span class="n">key</span> <span class="n">pair</span><span class="o">.</span>
<span class="n">Enter</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">which</span> <span class="n">to</span> <span class="n">save</span> <span class="n">the</span> <span class="n">key</span> <span class="p">(</span><span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="p">):</span>
<span class="n">Enter</span> <span class="n">passphrase</span> <span class="p">(</span><span class="n">empty</span> <span class="k">for</span> <span class="n">no</span> <span class="n">passphrase</span><span class="p">):</span>
<span class="n">Enter</span> <span class="n">same</span> <span class="n">passphrase</span> <span class="n">again</span><span class="p">:</span>
<span class="n">Your</span> <span class="n">identification</span> <span class="n">has</span> <span class="n">been</span> <span class="n">saved</span> <span class="ow">in</span> <span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="o">.</span>
<span class="n">Your</span> <span class="n">public</span> <span class="n">key</span> <span class="n">has</span> <span class="n">been</span> <span class="n">saved</span> <span class="ow">in</span> <span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="o">.</span><span class="n">pub</span><span class="o">.</span>
<span class="n">The</span> <span class="n">key</span> <span class="n">fingerprint</span> <span class="ow">is</span><span class="p">:</span>
<span class="mi">83</span><span class="p">:</span><span class="mi">9</span><span class="n">b</span><span class="p">:</span><span class="mi">5</span><span class="n">d</span><span class="p">:</span><span class="n">fe</span><span class="p">:</span><span class="n">e7</span><span class="p">:</span><span class="mi">1</span><span class="n">a</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="n">c1</span><span class="p">:</span><span class="mi">4</span><span class="n">d</span><span class="p">:</span><span class="n">d2</span><span class="p">:</span><span class="n">c3</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">8</span><span class="n">b</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">92</span><span class="p">:</span><span class="n">a7</span> <span class="n">root</span><span class="nd">@localhost</span><span class="o">.</span><span class="n">localdomain</span>
<span class="n">The</span> <span class="n">key</span><span class="s1">&#39;s randomart image is:</span>
<span class="o">+--</span><span class="p">[</span> <span class="n">RSA</span> <span class="mi">2048</span><span class="p">]</span><span class="o">----+</span>
<span class="o">|</span>         <span class="o">.</span><span class="n">o</span><span class="o">+</span> <span class="n">o</span><span class="o">=+.|</span>
<span class="o">|</span>         <span class="o">.+.</span><span class="n">o</span> <span class="o">.=</span><span class="n">o</span><span class="o">|</span>
<span class="o">|</span>         <span class="o">.</span><span class="n">o</span><span class="o">.</span>  <span class="o">.</span> <span class="o">.|</span>
<span class="o">|</span>       <span class="o">.</span> <span class="n">E</span>     <span class="o">.</span> <span class="o">|</span>
<span class="o">|</span>      <span class="o">.</span> <span class="n">S</span> <span class="o">.</span>   <span class="o">.</span>  <span class="o">|</span>
<span class="o">|</span>       <span class="o">+</span> <span class="o">+</span>   <span class="o">.</span>   <span class="o">|</span>
<span class="o">|</span>      <span class="n">o</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span>    <span class="o">|</span>
<span class="o">|</span>           <span class="o">.</span> <span class="o">..</span>  <span class="o">|</span>
<span class="o">|</span>            <span class="n">o</span><span class="o">+.</span>  <span class="o">|</span>
<span class="o">+-----------------+</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">400</span> <span class="pre">id_rsa.pub</span></code> 赋予公钥400权限</p>
<p>id_rsa即私钥，备份至本地后将服务器上的删除。</p>
<p><code class="docutils literal notranslate"><span class="pre">service</span> <span class="pre">sshd</span> <span class="pre">restart</span></code> 重启ssh服务</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../pam.html" class="btn btn-neutral float-right" title="PAM - 可插拔认证模块" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sshd.html" class="btn btn-neutral" title="sshd" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2019, lfzyx zhou

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/translations.js"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>